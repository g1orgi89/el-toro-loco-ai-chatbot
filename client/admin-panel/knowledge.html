<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shrooms AI Support Bot - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–∞–∑–æ–π –ó–Ω–∞–Ω–∏–π</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/knowledge.css">
    <meta name="description" content="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –¥–ª—è Shrooms AI Support Bot">
    <!-- Preconnect to font sources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –¢–æ–Ω–∫–∞—è –≤–µ—Ä—Å–∏—è –≥—Ä–∏–±–Ω–æ–≥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–æ–∂–¥—è –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü -->
    <div class="mushroom-bg-animation mushroom-bg-subtle" id="mushroom-matrix"></div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header">
            <div class="logo-container">
                <img src="img/logo.svg" alt="Shrooms AI Support Bot" class="logo">
                <h1>üçÑ Shrooms Admin</h1>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Dashboard</a></li>
                    <li><a href="tickets.html">Tickets</a></li>
                    <li><a href="knowledge.html" class="active">Knowledge Base</a></li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <span id="admin-username"></span>
                <button id="logout-btn" class="btn btn-text">Logout</button>
            </div>
        </header>
        
        <!-- Main content -->
        <main class="admin-content knowledge-content">
            <div class="knowledge-header">
                <h2>üß† –ì—Ä–∏–±–Ω–∞—è –ë–∞–∑–∞ –ó–Ω–∞–Ω–∏–π</h2>
                <div class="knowledge-actions">
                    <div class="filter-group">
                        <select id="category-filter" class="select-glow">
                            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="general">–û–±—â–∏–µ</option>
                            <option value="user-guide">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</option>
                            <option value="tokenomics">–¢–æ–∫–µ–Ω–æ–º–∏–∫–∞</option>
                            <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ</option>
                            <option value="troubleshooting">–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º</option>
                        </select>
                        
                        <select id="language-filter" class="select-glow">
                            <option value="all">–í—Å–µ —è–∑—ã–∫–∏</option>
                            <option value="en">English</option>
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="es">Espa√±ol</option>
                        </select>
                        
                        <input type="text" id="search-knowledge" placeholder="üîç –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π..." class="search-input">
                    </div>
                    
                    <button id="add-document" class="btn btn-primary btn-glow">
                        <span class="btn-text">üìù –î–æ–±–∞–≤–∏—Ç—å –î–æ–∫—É–º–µ–Ω—Ç</span>
                        <span class="btn-icon">üçÑ</span>
                    </button>
                </div>
            </div>
            
            <!-- Knowledge base documents -->
            <div class="knowledge-container glow-card">
                <div class="table-container">
                    <table class="data-table" id="knowledge-table">
                        <thead>
                            <tr>
                                <th class="col-id">ID</th>
                                <th class="col-title">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="col-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th class="col-language">–Ø–∑—ã–∫</th>
                                <th class="col-tags">–¢–µ–≥–∏</th>
                                <th class="col-updated">–û–±–Ω–æ–≤–ª–µ–Ω</th>
                                <th class="col-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-loading">
                                <td colspan="7">üçÑ –ü—Ä–æ—Ä–∞—Å—Ç–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        –ü–æ–∫–∞–∑–∞–Ω–æ <span id="pagination-range">0-0</span> –∏–∑ <span id="pagination-total">0</span> –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                    </div>
                    <div class="pagination-controls">
                        <button id="prev-page" class="btn btn-icon btn-secondary" disabled>
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                        <span id="pagination-current">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                        <button id="next-page" class="btn btn-icon btn-secondary" disabled>
                            –í–ø–µ—Ä–µ–¥ ‚Üí
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Document editor modal (hidden by default) -->
            <div class="document-editor-overlay" id="document-editor-overlay">
                <div class="document-editor-container glow-card">
                    <div class="document-editor-header">
                        <h3 id="editor-title">üìù –î–æ–±–∞–≤–∏—Ç—å –î–æ–∫—É–º–µ–Ω—Ç</h3>
                        <button id="close-document-editor" class="btn btn-icon btn-text">√ó</button>
                    </div>
                    
                    <div class="document-editor-content">
                        <form id="document-form" class="document-form">
                            <input type="hidden" id="document-id" name="document-id" value="">
                            
                            <div class="form-group">
                                <label for="document-title">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:</label>
                                <input type="text" id="document-title" name="document-title" required 
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ Xverse">
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="document-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                                    <select id="document-category" name="document-category" class="select-glow" required>
                                        <option value="general">–û–±—â–∏–µ</option>
                                        <option value="user-guide">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</option>
                                        <option value="tokenomics">–¢–æ–∫–µ–Ω–æ–º–∏–∫–∞</option>
                                        <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ</option>
                                        <option value="troubleshooting">–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="document-language">–Ø–∑—ã–∫:</label>
                                    <select id="document-language" name="document-language" class="select-glow" required>
                                        <option value="en">English</option>
                                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                                        <option value="es">Espa√±ol</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="document-tags">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                                <input type="text" id="document-tags" name="document-tags" 
                                       placeholder="–∫–æ—à–µ–ª–µ–∫, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, xverse, hiro">
                            </div>
                            
                            <div class="form-group">
                                <label for="document-content">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown):</label>
                                <textarea id="document-content" name="document-content" rows="15" required
                                          placeholder="# –ó–∞–≥–æ–ª–æ–≤–æ–∫

–í–≤–µ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑–¥–µ—Å—å. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Markdown:

- **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**
- *–ö—É—Ä—Å–∏–≤*
- [–°—Å—ã–ª–∫–∏](https://example.com)
- `–ö–æ–¥`

## –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫

–ë–æ–ª—å—à–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ..."></textarea>
                                <div class="editor-hints">
                                    <span>üí° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown: **–∂–∏—Ä–Ω—ã–π**, *–∫—É—Ä—Å–∏–≤*, [—Å—Å—ã–ª–∫–∏](url), # –ó–∞–≥–æ–ª–æ–≤–∫–∏, `–∫–æ–¥`</span>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" id="preview-document" class="btn btn-secondary btn-glow">
                                    <span class="btn-text">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</span>
                                </button>
                                
                                <button type="submit" class="btn btn-primary btn-glow">
                                    <span class="btn-text" id="save-document-text">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –î–æ–∫—É–º–µ–Ω—Ç</span>
                                    <span class="btn-icon">üçÑ</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Document preview modal (hidden by default) -->
            <div class="document-preview-overlay" id="document-preview-overlay">
                <div class="document-preview-container glow-card">
                    <div class="document-preview-header">
                        <h3>üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –î–æ–∫—É–º–µ–Ω—Ç–∞</h3>
                        <button id="close-document-preview" class="btn btn-icon btn-text">√ó</button>
                    </div>
                    
                    <div class="document-preview-content">
                        <div class="document-preview-meta">
                            <div class="preview-title" id="preview-title"></div>
                            <div class="preview-meta">
                                <span class="preview-category" id="preview-category"></span>
                                <span class="preview-language" id="preview-language"></span>
                            </div>
                            <div class="preview-tags" id="preview-tags"></div>
                        </div>
                        
                        <div class="document-preview-body" id="preview-content">
                            üçÑ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞...
                        </div>
                        
                        <div class="preview-actions">
                            <button id="edit-from-preview" class="btn btn-secondary btn-glow">
                                <span class="btn-text">‚úèÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Farming Rate Control -->
            <div class="farming-rate-container glow-card">
                <div class="section-header">
                    <h3>üöú –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é –§–∞—Ä–º–∏–Ω–≥–∞</h3>
                    <div class="last-updated">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="farming-last-updated">--</span></div>
                </div>
                
                <form id="farming-rate-form" class="farming-rate-form">
                    <div class="form-group">
                        <label for="farming-rate">–¢–µ–∫—É—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —Ñ–∞—Ä–º–∏–Ω–≥–∞ SHROOMS (%):</label>
                        <div class="rate-input-group">
                            <input type="number" id="farming-rate" name="farming-rate" 
                                   min="0" max="100" step="0.1" required placeholder="12.5">
                            <span class="rate-suffix">%</span>
                        </div>
                        <small class="rate-hint">üí° –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: 8-15%. –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è!</small>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-glow">
                        <span class="btn-text">üöÄ –û–±–Ω–æ–≤–∏—Ç—å –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</span>
                        <span class="btn-icon">üçÑ</span>
                    </button>
                </form>
            </div>
            
            <!-- RAG Index controls -->
            <div class="rag-index-container glow-card">
                <div class="section-header">
                    <h3>üîç –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RAG –ò–Ω–¥–µ–∫—Å–æ–º</h3>
                    <div class="last-updated">–ü–æ—Å–ª–µ–¥–Ω—è—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è: <span id="rag-last-indexed">--</span></div>
                </div>
                
                <div class="rag-stats">
                    <div class="rag-stat">
                        <label>üìö –í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:</label>
                        <span id="rag-docs-count">--</span>
                    </div>
                    
                    <div class="rag-stat">
                        <label>üóÉÔ∏è –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:</label>
                        <span id="rag-vector-store">--</span>
                    </div>
                    
                    <div class="rag-stat">
                        <label>ü§ñ –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:</label>
                        <span id="rag-embedding-model">--</span>
                    </div>
                    
                    <div class="rag-stat">
                        <label>üìà –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:</label>
                        <span id="rag-sync-status" class="status-badge status-unknown">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>
                    </div>
                </div>
                
                <div class="rag-actions">
                    <button id="sync-vector-store" class="btn btn-primary btn-glow">
                        <span class="btn-text">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Qdrant</span>
                    </button>
                    
                    <button id="rebuild-index" class="btn btn-warning btn-glow">
                        <span class="btn-text">üî® –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ò–Ω–¥–µ–∫—Å</span>
                    </button>
                    
                    <button id="test-rag-search" class="btn btn-secondary btn-glow">
                        <span class="btn-text">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å RAG –ü–æ–∏—Å–∫</span>
                    </button>
                    
                    <button id="diagnose-rag" class="btn btn-secondary btn-glow">
                        <span class="btn-text">ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</span>
                    </button>
                </div>
                
                <div class="rag-info">
                    <p>üí° <strong>–°–æ–≤–µ—Ç –≥—Ä–∏–±–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞—Ä–∏—É—Å–∞:</strong> –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞!</p>
                </div>
            </div>
            
            <!-- RAG Test modal (hidden by default) -->
            <div class="rag-test-overlay" id="rag-test-overlay">
                <div class="rag-test-container glow-card">
                    <div class="rag-test-header">
                        <h3>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG –ü–æ–∏—Å–∫–∞</h3>
                        <button id="close-rag-test" class="btn btn-icon btn-text">√ó</button>
                    </div>
                    
                    <div class="rag-test-content">
                        <div class="test-input-group">
                            <label for="rag-test-query">–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:</label>
                            <input type="text" id="rag-test-query" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ xverse?"
                                   class="test-query-input">
                            <button id="run-rag-test" class="btn btn-primary">
                                <span class="btn-text">üîç –í—ã–ø–æ–ª–Ω–∏—Ç—å –ü–æ–∏—Å–∫</span>
                            </button>
                        </div>
                        
                        <div class="test-results">
                            <h4>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</h4>
                            <div id="rag-test-results" class="test-results-content">
                                üçÑ –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å –ü–æ–∏—Å–∫"
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="admin-footer">
            <p>üçÑ Shrooms AI Support Bot - –ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ó–Ω–∞–Ω–∏—è–º–∏</p>
            <p class="copyright">¬© 2025 Shrooms Project. –í—Å–µ —Å–ø–æ—Ä—ã –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Scripts -->
    <!-- –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω: —Å–Ω–∞—á–∞–ª–∞ auth, –ø–æ—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ -->
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/knowledge.js"></script>
    
    <script>
        /**
         * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
         * –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - auth.js —É–∂–µ –ø—Ä–æ–≤–µ—Ä–∏–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üçÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∏–±–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π');
            
            // auth.js —É–∂–µ –ø—Ä–æ–≤–µ—Ä–∏–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
            // –ï—Å–ª–∏ –º—ã –∑–¥–µ—Å—å - –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
            if (typeof initKnowledgePage === 'function') {
                initKnowledgePage();
            } else {
                console.log('üçÑ –§—É–Ω–∫—Ü–∏—è initKnowledgePage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
                initBasicKnowledgePage();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–æ–Ω–∫—É—é –≤–µ—Ä—Å–∏—é –≥—Ä–∏–±–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã
            if (typeof initMushroomMatrix === 'function') {
                initMushroomMatrix(true); // subtle mode –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
            }
        });
        
        /**
         * –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è knowledge.js
         */
        function initBasicKnowledgePage() {
            console.log('üçÑ –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π');
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            loadBasicDocuments();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            setupKnowledgeFilters();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            setupKnowledgeModals();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RAG —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            setupRAGControls();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é —Ñ–∞—Ä–º–∏–Ω–≥–∞
            setupFarmingRateControl();
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
         */
        function setupKnowledgeFilters() {
            const categoryFilter = document.getElementById('category-filter');
            const languageFilter = document.getElementById('language-filter');
            const searchInput = document.getElementById('search-knowledge');
            
            if (categoryFilter) {
                categoryFilter.addEventListener('change', () => {
                    console.log('üçÑ –ò–∑–º–µ–Ω–µ–Ω —Ñ–∏–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', categoryFilter.value);
                    loadBasicDocuments();
                });
            }
            
            if (languageFilter) {
                languageFilter.addEventListener('change', () => {
                    console.log('üçÑ –ò–∑–º–µ–Ω–µ–Ω —Ñ–∏–ª—å—Ç—Ä —è–∑—ã–∫–∞:', languageFilter.value);
                    loadBasicDocuments();
                });
            }
            
            if (searchInput) {
                let searchTimeout;
                searchInput.addEventListener('input', () => {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        console.log('üçÑ –ü–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É:', searchInput.value);
                        loadBasicDocuments();
                    }, 500);
                });
            }
        }
        
        /**
         * –ë–∞–∑–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞)
         */
        function loadBasicDocuments() {
            console.log('üçÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≥—Ä–∏–±–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π');
            
            const tbody = document.querySelector('#knowledge-table tbody');
            if (!tbody) return;
            
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            const mockDocuments = [
                {
                    id: 'DOC001',
                    title: '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ Xverse',
                    category: 'user-guide',
                    language: 'ru',
                    tags: ['–∫–æ—à–µ–ª–µ–∫', 'xverse', '–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ'],
                    updated: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'DOC002',
                    title: 'What is SHROOMS token?',
                    category: 'tokenomics',
                    language: 'en',
                    tags: ['token', 'shrooms', 'overview'],
                    updated: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'DOC003',
                    title: '–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∞—Ä–º–∏–Ω–≥–æ–º',
                    category: 'troubleshooting',
                    language: 'ru',
                    tags: ['—Ñ–∞—Ä–º–∏–Ω–≥', '–ø—Ä–æ–±–ª–µ–º—ã', '—Ä–µ—à–µ–Ω–∏–µ'],
                    updated: '3 –¥–Ω—è –Ω–∞–∑–∞–¥'
                }
            ];
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
            const categoryFilter = document.getElementById('category-filter').value;
            const languageFilter = document.getElementById('language-filter').value;
            const searchQuery = document.getElementById('search-knowledge').value.toLowerCase();
            
            let filteredDocs = mockDocuments.filter(doc => {
                const matchesCategory = categoryFilter === 'all' || doc.category === categoryFilter;
                const matchesLanguage = languageFilter === 'all' || doc.language === languageFilter;
                const matchesSearch = !searchQuery || 
                    doc.title.toLowerCase().includes(searchQuery) ||
                    doc.tags.some(tag => tag.toLowerCase().includes(searchQuery));
                
                return matchesCategory && matchesLanguage && matchesSearch;
            });
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            tbody.innerHTML = filteredDocs.map(doc => `
                <tr onclick="editDocument('${doc.id}')">
                    <td class="col-id">${doc.id}</td>
                    <td class="col-title">${doc.title}</td>
                    <td class="col-category">
                        <span class="category-badge category-${doc.category}">
                            ${getCategoryText(doc.category)}
                        </span>
                    </td>
                    <td class="col-language">
                        <span class="language-badge language-${doc.language}">
                            ${getLanguageText(doc.language)}
                        </span>
                    </td>
                    <td class="col-tags">
                        ${doc.tags.map(tag => `<span class="tag-badge">${tag}</span>`).join(' ')}
                    </td>
                    <td class="col-updated">${doc.updated}</td>
                    <td class="col-actions">
                        <button class="btn btn-sm" onclick="editDocument('${doc.id}'); event.stopPropagation();">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteDocument('${doc.id}'); event.stopPropagation();">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateDocumentStats(filteredDocs.length);
        }
        
        /**
         * –ü–µ—Ä–µ–≤–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Ä—É—Å—Å–∫–∏–π
         */
        function getCategoryText(category) {
            const categoryMap = {
                'general': '–û–±—â–∏–µ',
                'user-guide': '–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ',
                'tokenomics': '–¢–æ–∫–µ–Ω–æ–º–∏–∫–∞',
                'technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ',
                'troubleshooting': '–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º'
            };
            return categoryMap[category] || category;
        }
        
        /**
         * –ü–µ—Ä–µ–≤–æ–¥ —è–∑—ã–∫–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
         */
        function getLanguageText(language) {
            const languageMap = {
                'en': 'English',
                'ru': '–†—É—Å—Å–∫–∏–π',
                'es': 'Espa√±ol'
            };
            return languageMap[language] || language;
        }
        
        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
         */
        function updateDocumentStats(totalDocs) {
            const rangeElement = document.getElementById('pagination-range');
            const totalElement = document.getElementById('pagination-total');
            const ragDocsCount = document.getElementById('rag-docs-count');
            
            if (rangeElement && totalElement) {
                const start = totalDocs > 0 ? 1 : 0;
                const end = totalDocs;
                
                rangeElement.textContent = `${start}-${end}`;
                totalElement.textContent = totalDocs;
            }
            
            if (ragDocsCount) {
                ragDocsCount.textContent = totalDocs;
            }
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
         */
        function setupKnowledgeModals() {
            // –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
            const addDocBtn = document.getElementById('add-document');
            if (addDocBtn) {
                addDocBtn.addEventListener('click', () => {
                    showDocumentEditor();
                });
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            const closeEditorBtn = document.getElementById('close-document-editor');
            if (closeEditorBtn) {
                closeEditorBtn.addEventListener('click', () => {
                    hideDocumentEditor();
                });
            }
            
            // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
            const previewBtn = document.getElementById('preview-document');
            if (previewBtn) {
                previewBtn.addEventListener('click', () => {
                    showDocumentPreview();
                });
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            const closePreviewBtn = document.getElementById('close-document-preview');
            if (closePreviewBtn) {
                closePreviewBtn.addEventListener('click', () => {
                    hideDocumentPreview();
                });
            }
            
            // –§–æ—Ä–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
            const documentForm = document.getElementById('document-form');
            if (documentForm) {
                documentForm.addEventListener('submit', handleDocumentSave);
            }
        }
        
        /**
         * –ü–æ–∫–∞–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
         */
        function showDocumentEditor(documentId = null) {
            console.log('üçÑ –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:', documentId);
            
            const overlay = document.getElementById('document-editor-overlay');
            const title = document.getElementById('editor-title');
            const form = document.getElementById('document-form');
            
            if (overlay && title && form) {
                if (documentId) {
                    title.textContent = '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –î–æ–∫—É–º–µ–Ω—Ç';
                    // TODO: –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                } else {
                    title.textContent = 'üìù –î–æ–±–∞–≤–∏—Ç—å –î–æ–∫—É–º–µ–Ω—Ç';
                    form.reset();
                }
                
                overlay.style.display = 'flex';
            }
        }
        
        /**
         * –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
         */
        function hideDocumentEditor() {
            const overlay = document.getElementById('document-editor-overlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }
        
        /**
         * –ü–æ–∫–∞–∑ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        function showDocumentPreview() {
            const title = document.getElementById('document-title').value;
            const category = document.getElementById('document-category').value;
            const language = document.getElementById('document-language').value;
            const tags = document.getElementById('document-tags').value;
            const content = document.getElementById('document-content').value;
            
            // –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown (–∑–∞–≥–ª—É—à–∫–∞)
            const processedContent = content
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^\* (.*$)/gim, '<li>$1</li>')
                .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                .replace(/\*(.*)\*/gim, '<em>$1</em>')
                .replace(/`(.*)`/gim, '<code>$1</code>')
                .replace(/\n/gim, '<br>');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            document.getElementById('preview-title').textContent = title;
            document.getElementById('preview-category').textContent = getCategoryText(category);
            document.getElementById('preview-language').textContent = getLanguageText(language);
            document.getElementById('preview-tags').innerHTML = tags.split(',').map(tag => 
                `<span class="tag-badge">${tag.trim()}</span>`).join(' ');
            document.getElementById('preview-content').innerHTML = processedContent;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            const overlay = document.getElementById('document-preview-overlay');
            if (overlay) {
                overlay.style.display = 'flex';
            }
        }
        
        /**
         * –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        function hideDocumentPreview() {
            const overlay = document.getElementById('document-preview-overlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }
        
        /**
         * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        async function handleDocumentSave(event) {
            event.preventDefault();
            
            console.log('üçÑ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –≥—Ä–∏–±–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π');
            
            // TODO: –†–µ–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
            showNotification('success', 'üçÑ –î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –≥—Ä–∏–±–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π!');
            hideDocumentEditor();
            loadBasicDocuments();
        }
        
        /**
         * –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        function editDocument(documentId) {
            console.log('üçÑ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:', documentId);
            showDocumentEditor(documentId);
        }
        
        /**
         * –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        function deleteDocument(documentId) {
            if (confirm('üçÑ –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ –≥—Ä–∏–±–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π?')) {
                console.log('üçÑ –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:', documentId);
                // TODO: –†–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
                showNotification('success', 'üçÑ –î–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –≥—Ä–∏–±–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π');
                loadBasicDocuments();
            }
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RAG —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
         */
        function setupRAGControls() {
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Qdrant
            const syncBtn = document.getElementById('sync-vector-store');
            if (syncBtn) {
                syncBtn.addEventListener('click', async () => {
                    console.log('üçÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Qdrant');
                    showNotification('info', 'üçÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º...');
                    // TODO: –†–µ–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
                });
            }
            
            // –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
            const rebuildBtn = document.getElementById('rebuild-index');
            if (rebuildBtn) {
                rebuildBtn.addEventListener('click', async () => {
                    if (confirm('üçÑ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                        console.log('üçÑ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ RAG –∏–Ω–¥–µ–∫—Å–∞');
                        showNotification('info', 'üçÑ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞...');
                        // TODO: –†–µ–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
                    }
                });
            }
            
            // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG –ø–æ–∏—Å–∫–∞
            const testBtn = document.getElementById('test-rag-search');
            if (testBtn) {
                testBtn.addEventListener('click', () => {
                    showRAGTestModal();
                });
            }
            
            // –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
            const diagnoseBtn = document.getElementById('diagnose-rag');
            if (diagnoseBtn) {
                diagnoseBtn.addEventListener('click', async () => {
                    console.log('üçÑ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ RAG —Å–∏—Å—Ç–µ–º—ã');
                    showNotification('info', 'üçÑ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞...');
                    // TODO: –†–µ–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
                });
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ RAG —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            const closeRAGTestBtn = document.getElementById('close-rag-test');
            if (closeRAGTestBtn) {
                closeRAGTestBtn.addEventListener('click', () => {
                    hideRAGTestModal();
                });
            }
            
            // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ RAG —Ç–µ—Å—Ç–∞
            const runTestBtn = document.getElementById('run-rag-test');
            if (runTestBtn) {
                runTestBtn.addEventListener('click', () => {
                    runRAGTest();
                });
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ RAG
            loadRAGStats();
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ RAG (–∑–∞–≥–ª—É—à–∫–∞)
         */
        function loadRAGStats() {
            document.getElementById('rag-last-indexed').textContent = '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥';
            document.getElementById('rag-vector-store').textContent = 'Qdrant (–ª–æ–∫–∞–ª—å–Ω—ã–π)';
            document.getElementById('rag-embedding-model').textContent = 'text-embedding-ada-002';
            
            const statusElement = document.getElementById('rag-sync-status');
            statusElement.textContent = '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω';
            statusElement.className = 'status-badge status-success';
        }
        
        /**
         * –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ RAG —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         */
        function showRAGTestModal() {
            const overlay = document.getElementById('rag-test-overlay');
            if (overlay) {
                overlay.style.display = 'flex';
            }
        }
        
        /**
         * –°–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ RAG —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         */
        function hideRAGTestModal() {
            const overlay = document.getElementById('rag-test-overlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }
        
        /**
         * –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ RAG —Ç–µ—Å—Ç–∞
         */
        function runRAGTest() {
            const query = document.getElementById('rag-test-query').value;
            const resultsDiv = document.getElementById('rag-test-results');
            
            if (!query.trim()) {
                showNotification('warning', 'üçÑ –í–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å');
                return;
            }
            
            console.log('üçÑ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ RAG —Ç–µ—Å—Ç–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞:', query);
            
            // –ó–∞–≥–ª—É—à–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            resultsDiv.innerHTML = `
                <div class="test-result">
                    <h5>üìÑ –î–æ–∫—É–º–µ–Ω—Ç: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ Xverse"</h5>
                    <p>–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 95%</p>
                    <p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ Xverse –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Shrooms...</p>
                </div>
                <div class="test-result">
                    <h5>üìÑ –î–æ–∫—É–º–µ–Ω—Ç: "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º"</h5>
                    <p>–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 78%</p>
                    <p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏...</p>
                </div>
            `;
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é —Ñ–∞—Ä–º–∏–Ω–≥–∞
         */
        function setupFarmingRateControl() {
            const farmingForm = document.getElementById('farming-rate-form');
            if (farmingForm) {
                farmingForm.addEventListener('submit', handleFarmingRateUpdate);
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ (–∑–∞–≥–ª—É—à–∫–∞)
            const rateInput = document.getElementById('farming-rate');
            if (rateInput) {
                rateInput.value = '12.5'; // –¢–µ–∫—É—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
            }
            
            document.getElementById('farming-last-updated').textContent = '1 —á–∞—Å –Ω–∞–∑–∞–¥';
        }
        
        /**
         * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ —Ñ–∞—Ä–º–∏–Ω–≥–∞
         */
        async function handleFarmingRateUpdate(event) {
            event.preventDefault();
            
            const rateInput = document.getElementById('farming-rate');
            const rate = parseFloat(rateInput.value);
            
            if (isNaN(rate) || rate < 0 || rate > 100) {
                showNotification('error', 'üçÑ –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –æ—Ç 0 –¥–æ 100%');
                return;
            }
            
            try {
                console.log('üçÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ —Ñ–∞—Ä–º–∏–Ω–≥–∞ –¥–æ', rate + '%');
                
                // TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                document.getElementById('farming-last-updated').textContent = new Date().toLocaleString('ru-RU');
                
                showNotification('success', `üçÑ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —Ñ–∞—Ä–º–∏–Ω–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ ${rate}%`);
                
            } catch (error) {
                console.error('üçÑ –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏:', error);
                showNotification('error', 'üçÑ –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
        }
        
        /**
         * –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
         */
        function showNotification(type, message) {
            const container = document.getElementById('notification-container');
            if (!container) {
                alert(message);
                return;
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            
            container.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
    </script>
</body>
</html>